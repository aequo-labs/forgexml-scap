# ForgeXML SCAP

Go structs and validators for SCAP (Security Content Automation Protocol) XML schemas.

Generated by [ForgeXML](https://github.com/aequo-labs/forgexml).

## Generated Code - DO NOT EDIT DIRECTLY

All code in this repository is auto-generated by forgexml. To make changes:

1. **Edit the templates** in [forgexml/pkg/generator/templates/](https://github.com/aequo-labs/forgexml/tree/main/pkg/generator/templates/)
2. **Rebuild forgexml** and regenerate the code
3. **Fix import paths** (change `"generated/..."` to full module path)
4. **Commit both** the template change (forgexml) and regenerated code (this repo)

**Never edit the `.go` files directly** - your changes will be overwritten on the next regeneration.

## Directories

| Directory | Contents |
|-----------|----------|
| `internal/generated/` | Generated Go structs for XML schemas |
| `cmd/validator/` | Generated validator CLI application |
| `cmd/ui/` | Generated web UI for XML editing |
| `schemas/` | Source XSD schema files |

## Usage

### As a Library

```go
import (
    arf "github.com/aequo-labs/forgexml-scap/internal/generated/gov/nist/scap/schema/asset-reporting-format/1-1"
)

// Unmarshal XML
var report arf.AssetReportCollectionElement
if err := xml.Unmarshal(xmlData, &report); err != nil {
    log.Fatal(err)
}

// Marshal back to XML with 100% fidelity
output, err := report.MarshalIndentClean("", "  ")
```

### Validator CLI

```bash
# Build
go build -o validator ./cmd/validator

# Validate single file
./validator --input file.xml

# Validate and output reserialized XML
./validator --input file.xml --output result.xml

# Batch validate directory
./validator --input ./xml-files --report summary.txt
```

### Web UI

```bash
# Build and run
go build -o ui ./cmd/ui
./ui

# Open http://localhost:8080
```

The web UI provides form-based XML editing with validation, built on [webserver-core-ui](https://github.com/aequo-labs/webserver-core-ui).

## Dependencies

This project requires access to private Aequo Labs repositories:

- [webserver-core](https://github.com/aequo-labs/webserver-core) - HTTP framework (for UI)
- [webserver-core-ui](https://github.com/aequo-labs/webserver-core-ui) - UI components (for UI)
- [legcheck](https://github.com/aequo-labs/legcheck) - License validation library

Configure GOPRIVATE for access:

```bash
go env -w GOPRIVATE=github.com/aequo-labs/*
```

## Regenerating Code

```bash
# Build forgexml
cd /path/to/forgexml
go build -o forgexml ./cmd/forgexml

# Generate code
./forgexml -output /path/to/forgexml-scap/internal/generated \
    -generate-validators \
    /path/to/forgexml-scap/schemas/arf/asset-reporting-format_1.1.0.xsd

# Fix import paths (required after each generation)
cd /path/to/forgexml-scap
# Replace "generated/" with full module path in all generated .go files
```

## License

See LICENSE file.
