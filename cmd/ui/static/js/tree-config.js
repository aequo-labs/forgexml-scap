// Dictionary 2.0 Editor - Tree Configuration
// Auto-generated by forgexml UI generator

const TreeConfig = {
    // Schema information
    schemaName: 'Dictionary 2.0',
    namespace: 'http://cpe.mitre.org/dictionary/2.0',
    
    // Tree display settings
    itemHeight: 28,
    bufferSize: 10,
    
    // Icons for different element types
    icons: {
        default: 'fa-cube',
        root: 'fa-file-code',
        element: 'fa-tag',
        attribute: 'fa-at',
        sequence: 'fa-list',
        choice: 'fa-code-branch',
        text: 'fa-font',
        complex: 'fa-cubes',
        simple: 'fa-cube'
    },
    
    // Get icon for element type
    getIcon: function(type) {
        return this.icons[type] || this.icons.default;
    },
    
    // Format label for tree node
    formatLabel: function(node) {
        if (node.data && node.data.id) {
            return `${node.label} (${node.data.id})`;
        }
        return node.label;
    },
    
    // Check if node can have children
    canHaveChildren: function(node) {
        // Complex types can have children
        return node.hasChildren || node.type === 'complex';
    },
    
    // Get context menu items for node
    getContextMenu: function(node) {
        const items = [];
        
        items.push({
            label: 'Edit',
            icon: 'fa-edit',
            action: () => window.location.href = `/edit?path=${encodeURIComponent(node.path)}`
        });
        
        if (this.canHaveChildren(node)) {
            items.push({
                label: 'Add Child',
                icon: 'fa-plus',
                action: () => this.showAddChildDialog(node)
            });
        }
        
        items.push({
            label: 'Delete',
            icon: 'fa-trash',
            action: () => this.confirmDelete(node)
        });
        
        return items;
    },
    
    // Show add child dialog
    showAddChildDialog: function(parentNode) {
        // Trigger the add element modal
        const event = new CustomEvent('tree:addChild', { detail: { parent: parentNode } });
        document.dispatchEvent(event);
    },
    
    // Confirm delete
    confirmDelete: function(node) {
        const event = new CustomEvent('tree:delete', { detail: { node: node } });
        document.dispatchEvent(event);
    }
};

// Export for use
if (typeof module !== 'undefined' && module.exports) {
    module.exports = TreeConfig;
}
