{{define "js-includes" -}}
{{- $v := .Version -}}
<script src="/static/js/core/loading-overlay.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/core/theme-switch.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/core/confirm-modal.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- if .ShowLicenseManager}}
<script src="/static/js/core/license-modal.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- if .ShowStatusIndicator}}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const statusDot = document.getElementById('status-dot');
    const statusIndicator = document.getElementById('status-indicator');
    function updateStatus() {
        const checkTime = new Date().toLocaleTimeString();
        fetch('/api/health')
            .then(response => response.json())
            .then(data => {
                statusDot.className = 'status-dot';
                const lastChecked = data.timestamp ? new Date(data.timestamp).toLocaleTimeString() : checkTime;
                if (data.status === 'healthy') {
                    statusDot.classList.add('healthy');
                    statusIndicator.setAttribute('data-tooltip', `Server Status: Online | Last checked: ${lastChecked}`);
                } else {
                    statusDot.classList.add('unhealthy');
                    statusIndicator.setAttribute('data-tooltip', `Server Status: Offline | Last checked: ${lastChecked}`);
                }
            })
            .catch(error => {
                statusDot.className = 'status-dot unhealthy';
                statusIndicator.setAttribute('data-tooltip', `Server Status: Error | Last checked: ${checkTime}`);
            });
    }
    updateStatus();
    setInterval(updateStatus, 30000);
});
</script>
{{- end}}
{{- if .NeedsCharts}}
<script src="/static/js/charts/echarts.min.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/charts/echarts-gl.min.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/charts/echarts-liquidfill.min.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/charts/echarts-wordcloud.min.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- if .NeedsExport}}
<script src="/static/js/vendor/html2canvas.min.js{{if $v}}?v={{$v}}{{end}}"></script>
<script src="/static/js/vendor/jszip.min.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- if .NeedsMermaid}}
<script src="/static/js/core/mermaid.min.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- if .NeedsPanZoom}}
<script src="/static/js/vendor/svg-pan-zoom.min.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- if .ShowLogin}}
<script src="/static/js/core/auth.js{{if $v}}?v={{$v}}{{end}}"></script>
{{- end}}
{{- end}}